<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ - –ü–µ–∫–∞—Ä–Ω—è "–í–∫—É—Å–Ω—ã–π —É–≥–æ–ª–æ–∫"</title>
    <meta name="description" content="–ö–∞—Ç–∞–ª–æ–≥ —Å–≤–µ–∂–µ–π –≤—ã–ø–µ—á–∫–∏ –æ—Ç –ø–µ–∫–∞—Ä–Ω–∏ '–í–∫—É—Å–Ω—ã–π —É–≥–æ–ª–æ–∫' - —Ö–ª–µ–±, –ø–∏—Ä–æ–≥–∏, –¥–µ—Å–µ—Ä—Ç—ã –∏ —Ç–æ—Ä—Ç—ã –Ω–∞ –∑–∞–∫–∞–∑">
    <link rel="stylesheet" href="scss/main.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo-container">
                <a href="index.html" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É">
                    <div class="logo-placeholder">
                        <img src="images/logo.jpg" alt="" class="logo-placeholder">
                    </div>
                </a>
                <h1>–ü–µ–∫–∞—Ä–Ω—è "–í–∫—É—Å–Ω—ã–π —É–≥–æ–ª–æ–∫"</h1>
            </div>
            
            <nav class="main-nav" aria-label="–û—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é">
                <ul>
                    <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="about.html">–û –Ω–∞—Å</a></li>
                    <li><a href="catalog.html" class="active">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                    <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    <li><a href="login.html">–í—Ö–æ–¥</a></li>
                    <li><a href="register.html">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a></li>
                    <li><a href="#" class="cart-link">–ö–æ—Ä–∑–∏–Ω–∞ <span class="cart-count">0</span></a></li>
                </ul>
            </nav>
            
            <button class="mobile-menu-btn" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">‚ò∞</button>
        </div>
    </header>

    <main>
        <section class="catalog-hero">
            <div class="container">
                <h1>–ù–∞—à–∞ –ø—Ä–æ–¥—É–∫—Ü–∏—è</h1>
                <p>–®–∏—Ä–æ–∫–∏–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç —Å–≤–µ–∂–µ–π –≤—ã–ø–µ—á–∫–∏, –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–æ–π —Å –ª—é–±–æ–≤—å—é</p>
            </div>
        </section>

        <section class="products-filter">
            <div class="container">
                <div class="filter-controls">
                    <select id="categoryFilter" class="form-control">
                        <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                        <option value="–•–ª–µ–±">–•–ª–µ–±</option>
                        <option value="–ü–∏—Ä–æ–≥–∏">–ü–∏—Ä–æ–≥–∏</option>
                        <option value="–î–µ—Å–µ—Ä—Ç—ã">–î–µ—Å–µ—Ä—Ç—ã</option>
                        <option value="–°–¥–æ–±–Ω–∞—è –≤—ã–ø–µ—á–∫–∞">–°–¥–æ–±–Ω–∞—è –≤—ã–ø–µ—á–∫–∞</option>
                    </select>
                    <select id="sortFilter" class="form-control">
                        <option value="newest">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
                        <option value="price-low">–ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Ü–µ–Ω—ã</option>
                        <option value="price-high">–ü–æ —É–±—ã–≤–∞–Ω–∏—é —Ü–µ–Ω—ã</option>
                        <option value="name">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option>
                    </select>
                    <div class="filter-badges">
                        <label class="checkbox-badge">
                            <input type="checkbox" id="newFilter">
                            <span>–ù–æ–≤–∏–Ω–∫–∏</span>
                        </label>
                        <label class="checkbox-badge">
                            <input type="checkbox" id="saleFilter">
                            <span>–ê–∫—Ü–∏–∏</span>
                        </label>
                    </div>
                </div>
            </div>
        </section>

        <section class="products-catalog">
            <div class="container">
                <div class="catalog-grid" id="products-container">
                    <!-- –ü—Ä–æ–¥—É–∫—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞...</div>
                </div>
                
                <div class="pagination" id="pagination">
                    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
        </section>

        <section class="catalog-cta">
            <div class="container">
                <div class="cta-content">
                    <h2>–ù–µ –Ω–∞—à–ª–∏ —á—Ç–æ –∏—Å–∫–∞–ª–∏?</h2>
                    <p>–ú—ã –≥–æ—Ç–æ–≤—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å –¥–ª—è –≤–∞—Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ –ø–æ –≤–∞—à–µ–º—É —Ä–µ—Ü–µ–ø—Ç—É!</p>
                    <div class="cta-buttons">
                        <a href="contacts.html" class="btn btn-primary">–°–≤—è–∑–∞—Ç—å—Å—è –¥–ª—è –∑–∞–∫–∞–∑–∞</a>
                        <a href="tel:+74951234567" class="btn btn-secondary">–ü–æ–∑–≤–æ–Ω–∏—Ç—å –Ω–∞–º</a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <div class="logo-placeholder">üçû</div>
                    <p>–ü–µ–∫–∞—Ä–Ω—è "–í–∫—É—Å–Ω—ã–π —É–≥–æ–ª–æ–∫"</p>
                    <p>–°–≤–µ–∂–∞—è –≤—ã–ø–µ—á–∫–∞ —Å –ª—é–±–æ–≤—å—é —Å 2010 –≥–æ–¥–∞</p>
                </div>
                
                <nav class="footer-nav" aria-label="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –º–µ–Ω—é">
                    <h4>–ú–µ–Ω—é</h4>
                    <ul>
                        <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="about.html">–û –Ω–∞—Å</a></li>
                        <li><a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                        <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    </ul>
                </nav>
                
                <address class="footer-contact">
                    <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                    <p>–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 10</p>
                    <p><a href="tel:+74951234567">+7 (495) 123-45-67</a></p>
                    <p><a href="mailto:info@vkusniy-ugolok.ru">info@vkusniy-ugolok.ru</a></p>
                </address>
                
                <div class="footer-social">
                    <h4>–ú—ã –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö</h4>
                    <ul>
                        <li><a href="#" aria-label="–ù–∞—à Instagram">Instagram</a></li>
                        <li><a href="#" aria-label="–ù–∞—à–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ">VKontakte</a></li>
                        <li><a href="#" aria-label="–ù–∞—à–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Facebook">Facebook</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 –ü–µ–∫–∞—Ä–Ω—è "–í–∫—É—Å–Ω—ã–π —É–≥–æ–ª–æ–∫". –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script src="js/auth.js"></script>
    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
<script>
    // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
    document.addEventListener('DOMContentLoaded', async () => {
        await loadAllProducts();
        updateCartCount(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã
    });

    async function loadAllProducts() {
        const container = document.getElementById('products-container');
        
        try {
            const response = await fetch('/api/products');
            const result = await response.json();
            
            if (result.success && result.data) {
                container.innerHTML = result.data.map(product => `
                    <div class="product-card">
                        <div class="card-badge">
                            ${product.is_new ? '<span class="badge badge-new">–ù–æ–≤–∏–Ω–∫–∞</span>' : ''}
                            ${product.on_sale ? '<span class="badge badge-sale">–ê–∫—Ü–∏—è</span>' : ''}
                        </div>
                        <div>
                            <img src="${product.image_url || 'images/placeholder.jpg'}" 
                                 alt="${product.name}" 
                                 class="card-image"
                                 onerror="this.onerror=null; this.src='images/placeholder.jpg'">
                        </div>
                        <div class="card-body">
                            <h3 class="card-title">${product.name}</h3>
                            <p class="card-description">${product.description || ''}</p>
                            ${product.category ? `<p class="card-category">${product.category}</p>` : ''}
                            <div class="card-price">
                                ${product.price} —Ä—É–±.
                                ${product.old_price ? `<span class="old-price">${product.old_price} —Ä—É–±.</span>` : ''}
                            </div>
                            <div class="card-actions">
                                <button class="btn btn-outline">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                                <button class="btn btn-primary add-to-cart-btn"
                                        data-product-id="${product.id}"
                                        data-product-name="${product.name}" 
                                        data-product-price="${product.price}">
                                    –í –∫–æ—Ä–∑–∏–Ω—É
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–í –∫–æ—Ä–∑–∏–Ω—É"
                container.querySelectorAll('.add-to-cart-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const productId = this.dataset.productId;
                        const productName = this.dataset.productName;
                        const price = parseFloat(this.dataset.productPrice);
                        
                        addToCart(productId, productName, price);
                    });
                });
                
            } else {
                container.innerHTML = '<p class="no-products">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>';
            }
        } catch (error) {
            console.error('Error loading products:', error);
            container.innerHTML = '<p class="error">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ–≤–∞—Ä—ã</p>';
        }
    }
</script>
</body>
</html>